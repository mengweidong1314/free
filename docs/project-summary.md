# Javaé«˜å¯ç”¨é«˜æ€§èƒ½é¡¹ç›®æ€»ç»“

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå®Œæ•´çš„Javaé«˜å¯ç”¨ã€é«˜æ€§èƒ½å¾®æœåŠ¡æ¶æ„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ç°ä»£Javaåº”ç”¨å¼€å‘çš„æœ€ä½³å®è·µã€‚

## ğŸ—ï¸ æ¶æ„ç‰¹ç‚¹

### é«˜å¯ç”¨ç‰¹æ€§
1. **æœåŠ¡å‘ç°**: ä½¿ç”¨Eurekaå®ç°æœåŠ¡æ³¨å†Œä¸å‘ç°
2. **è´Ÿè½½å‡è¡¡**: Nginx + Spring Cloud Gatewayå®ç°å¤šå±‚è´Ÿè½½å‡è¡¡
3. **ç†”æ–­é™çº§**: Sentinelå®ç°æµé‡æ§åˆ¶å’Œç†”æ–­ä¿æŠ¤
4. **ç›‘æ§å‘Šè­¦**: Prometheus + Grafanaå®ç°å…¨æ–¹ä½ç›‘æ§
5. **å®¹å™¨åŒ–éƒ¨ç½²**: Docker + Docker Composeå®ç°æ ‡å‡†åŒ–éƒ¨ç½²

### é«˜æ€§èƒ½ç‰¹æ€§
1. **å¤šçº§ç¼“å­˜**: Caffeine(æœ¬åœ°) + Redis(åˆ†å¸ƒå¼)ç¼“å­˜ç­–ç•¥
2. **å¼‚æ­¥å¤„ç†**: CompletableFuture + çº¿ç¨‹æ± å®ç°å¼‚æ­¥æ“ä½œ
3. **è¿æ¥æ± ä¼˜åŒ–**: HikariCP + Druidå®ç°æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–
4. **JVMè°ƒä¼˜**: G1GC + å‚æ•°ä¼˜åŒ–å®ç°JVMæ€§èƒ½æå‡
5. **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡æŸ¥è¯¢å’Œæ‰¹é‡æ›´æ–°æ“ä½œ

## ğŸ“ é¡¹ç›®ç»“æ„

```
java-high-performance/
â”œâ”€â”€ common/                    # å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ config/               # é…ç½®ç±»
â”‚   â”‚   â”œâ”€â”€ CacheConfig.java  # ç¼“å­˜é…ç½®
â”‚   â”‚   â”œâ”€â”€ AsyncConfig.java  # å¼‚æ­¥é…ç½®
â”‚   â”‚   â”œâ”€â”€ SentinelConfig.java # é™æµç†”æ–­é…ç½®
â”‚   â”‚   â””â”€â”€ MonitoringConfig.java # ç›‘æ§é…ç½®
â”‚   â””â”€â”€ service/              # å…¬å…±æœåŠ¡
â”‚       â”œâ”€â”€ CacheService.java # ç¼“å­˜æœåŠ¡
â”‚       â””â”€â”€ AsyncService.java # å¼‚æ­¥æœåŠ¡
â”œâ”€â”€ user-service/             # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ entity/              # å®ä½“ç±»
â”‚   â”œâ”€â”€ mapper/              # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ service/             # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚
â”‚   â””â”€â”€ UserServiceApplication.java # å¯åŠ¨ç±»
â”œâ”€â”€ docker/                  # Dockeré…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml   # æœåŠ¡ç¼–æ’
â”‚   â””â”€â”€ Dockerfile          # é•œåƒæ„å»º
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ jvm-optimization.md # JVMä¼˜åŒ–
â”‚   â”œâ”€â”€ high-availability.md # é«˜å¯ç”¨æ¶æ„
â”‚   â””â”€â”€ project-summary.md  # é¡¹ç›®æ€»ç»“
â”œâ”€â”€ start.sh               # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ performance-test.sh    # æ€§èƒ½æµ‹è¯•è„šæœ¬
â””â”€â”€ pom.xml               # Mavené…ç½®
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Spring Boot 3.2.0**: å¾®æœåŠ¡æ¡†æ¶
- **Spring Cloud 2023.0.0**: å¾®æœåŠ¡ç”Ÿæ€
- **Spring Cloud Alibaba 2022.0.0.0**: é˜¿é‡Œäº‘å¾®æœåŠ¡ç»„ä»¶

### æ•°æ®å­˜å‚¨
- **MySQL 8.0**: å…³ç³»å‹æ•°æ®åº“
- **Redis 7**: ç¼“å­˜æ•°æ®åº“
- **MyBatis Plus 3.5.4**: ORMæ¡†æ¶

### é«˜å¯ç”¨ç»„ä»¶
- **Eureka**: æœåŠ¡æ³¨å†Œå‘ç°
- **Sentinel**: é™æµç†”æ–­
- **Nginx**: è´Ÿè½½å‡è¡¡
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²

### ç›‘æ§ç»„ä»¶
- **Prometheus**: æŒ‡æ ‡æ”¶é›†
- **Grafana**: å¯è§†åŒ–ç›‘æ§
- **Micrometer**: åº”ç”¨æŒ‡æ ‡

### æ€§èƒ½ä¼˜åŒ–
- **Caffeine**: æœ¬åœ°ç¼“å­˜
- **HikariCP**: æ•°æ®åº“è¿æ¥æ± 
- **CompletableFuture**: å¼‚æ­¥ç¼–ç¨‹
- **G1GC**: åƒåœ¾æ”¶é›†å™¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- JDK 17+
- Maven 3.8+
- Docker & Docker Compose
- 8GB+ å†…å­˜

### å¯åŠ¨æ­¥éª¤
1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd java-high-performance
```

2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
./start.sh
```

3. éªŒè¯æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8081/actuator/health

# æŸ¥çœ‹Eurekaæ§åˆ¶å°
open http://localhost:8761

# æŸ¥çœ‹ç›‘æ§é¢æ¿
open http://localhost:3000
```

4. è¿è¡Œæ€§èƒ½æµ‹è¯•
```bash
./performance-test.sh
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### é¢„æœŸæ€§èƒ½
- **QPS**: 1000+ (å•å®ä¾‹)
- **å“åº”æ—¶é—´**: < 100ms (95%åˆ†ä½)
- **é”™è¯¯ç‡**: < 0.1%
- **å¯ç”¨æ€§**: 99.9%+

### ç›‘æ§æŒ‡æ ‡
- JVMå†…å­˜ä½¿ç”¨ç‡
- GCé¢‘ç‡å’Œåœé¡¿æ—¶é—´
- HTTPè¯·æ±‚å“åº”æ—¶é—´
- ç¼“å­˜å‘½ä¸­ç‡
- æ•°æ®åº“è¿æ¥æ± çŠ¶æ€

## ğŸ”§ é…ç½®è¯´æ˜

### JVMä¼˜åŒ–å‚æ•°
```bash
-Xms4g -Xmx4g                    # å †å†…å­˜
-XX:+UseG1GC                     # åƒåœ¾æ”¶é›†å™¨
-XX:MaxGCPauseMillis=200         # æœ€å¤§GCåœé¡¿æ—¶é—´
-XX:MetaspaceSize=256m           # å…ƒç©ºé—´å¤§å°
```

### ç¼“å­˜é…ç½®
```yaml
# Caffeineæœ¬åœ°ç¼“å­˜
maximumSize: 10,000              # æœ€å¤§å®¹é‡
expireAfterWrite: 30m            # å†™å…¥åè¿‡æœŸæ—¶é—´
expireAfterAccess: 10m           # è®¿é—®åè¿‡æœŸæ—¶é—´

# Redisåˆ†å¸ƒå¼ç¼“å­˜
timeout: 3000ms                  # è¿æ¥è¶…æ—¶
maxActive: 20                    # æœ€å¤§è¿æ¥æ•°
```

### é™æµé…ç½®
```yaml
# Sentinelé™æµè§„åˆ™
user-service: 100 QPS            # ç”¨æˆ·æœåŠ¡é™æµ
order-service: 50 QPS            # è®¢å•æœåŠ¡é™æµ
payment-service: 30 QPS          # æ”¯ä»˜æœåŠ¡é™æµ
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ç¼“å­˜ç­–ç•¥
- çƒ­ç‚¹æ•°æ®ä½¿ç”¨æœ¬åœ°ç¼“å­˜
- åˆ†å¸ƒå¼æ•°æ®ä½¿ç”¨Redisç¼“å­˜
- å®ç°ç¼“å­˜ç©¿é€ä¿æŠ¤
- å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜

### 2. å¼‚æ­¥å¤„ç†
- IOå¯†é›†å‹æ“ä½œä½¿ç”¨å¼‚æ­¥
- ä½¿ç”¨CompletableFutureé¿å…é˜»å¡
- åˆç†é…ç½®çº¿ç¨‹æ± å¤§å°
- å®ç°å¼‚æ­¥é‡è¯•æœºåˆ¶

### 3. æ•°æ®åº“ä¼˜åŒ–
- ä½¿ç”¨è¿æ¥æ± ç®¡ç†è¿æ¥
- ä¼˜åŒ–SQLæŸ¥è¯¢è¯­å¥
- å®ç°è¯»å†™åˆ†ç¦»
- å®šæœŸæ¸…ç†æ…¢æŸ¥è¯¢

### 4. ç›‘æ§å‘Šè­¦
- è®¾ç½®åˆç†çš„å‘Šè­¦é˜ˆå€¼
- ç›‘æ§å…³é”®ä¸šåŠ¡æŒ‡æ ‡
- å®ç°è‡ªåŠ¨åŒ–è¿ç»´
- å®šæœŸåˆ†ææ€§èƒ½æ•°æ®

## ğŸ” æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜
1. **æœåŠ¡å¯åŠ¨å¤±è´¥**: æ£€æŸ¥ç«¯å£å ç”¨å’Œä¾èµ–æœåŠ¡
2. **æ€§èƒ½ä¸‹é™**: æ£€æŸ¥JVMå‚æ•°å’Œç¼“å­˜é…ç½®
3. **è¿æ¥è¶…æ—¶**: æ£€æŸ¥ç½‘ç»œå’Œè¿æ¥æ± é…ç½®
4. **å†…å­˜æ³„æ¼**: ä½¿ç”¨JProfileråˆ†æå†…å­˜ä½¿ç”¨

### æ’æŸ¥å·¥å…·
- **JProfiler**: æ€§èƒ½åˆ†æ
- **Arthas**: åœ¨çº¿è¯Šæ–­
- **VisualVM**: JVMç›‘æ§
- **Prometheus**: æŒ‡æ ‡ç›‘æ§

## ğŸ“ˆ æ‰©å±•å»ºè®®

### æ°´å¹³æ‰©å±•
- å¢åŠ æœåŠ¡å®ä¾‹æ•°é‡
- ä½¿ç”¨Kubernetesè¿›è¡Œç¼–æ’
- å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹
- é…ç½®è´Ÿè½½å‡è¡¡ç­–ç•¥

### å‚ç›´æ‰©å±•
- ä¼˜åŒ–JVMå‚æ•°é…ç½®
- å‡çº§ç¡¬ä»¶é…ç½®
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
- å®ç°ç¼“å­˜é¢„çƒ­

### æ¶æ„ä¼˜åŒ–
- å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—
- å®ç°åˆ†å¸ƒå¼äº‹åŠ¡
- é…ç½®CDNåŠ é€Ÿ
- å®ç°å¾®æœåŠ¡æ²»ç†

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Spring Bootå®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [Spring Cloudå®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-cloud)
- [Dockerå®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)

### æ€§èƒ½ä¼˜åŒ–
- [JVMè°ƒä¼˜æŒ‡å—](https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/)
- [MySQLæ€§èƒ½ä¼˜åŒ–](https://dev.mysql.com/doc/refman/8.0/en/optimization.html)
- [Redisæ€§èƒ½ä¼˜åŒ–](https://redis.io/topics/optimization)

### ç›‘æ§å·¥å…·
- [Prometheuså®˜æ–¹æ–‡æ¡£](https://prometheus.io/docs/)
- [Grafanaå®˜æ–¹æ–‡æ¡£](https://grafana.com/docs/)
- [Micrometerå®˜æ–¹æ–‡æ¡£](https://micrometer.io/docs)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ï¼

### å¼€å‘è§„èŒƒ
- éµå¾ªJavaç¼–ç è§„èŒƒ
- æ·»åŠ å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- è¿›è¡Œä»£ç å®¡æŸ¥

### æµ‹è¯•è¦æ±‚
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- é›†æˆæµ‹è¯•è¦†ç›–ä¸»è¦åŠŸèƒ½
- æ€§èƒ½æµ‹è¯•éªŒè¯æ€§èƒ½æŒ‡æ ‡
- å‹åŠ›æµ‹è¯•éªŒè¯ç¨³å®šæ€§

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œæ¼”ç¤ºç›®çš„ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¯·æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ã€‚